{% extends "base.html" %}
{% load staticfiles %}

{# TITLE #}
{% block pagetitle %}
	Preprocess - 
{% endblock %}

{# UPLOAD TAB ACTIVE #}
{% block uploadtab %}
	{% if user.is_authenticated %}
		<li class="dropdown">
			<a href="#" class="dropdown-toggle activetab" data-toggle="dropdown">START<span class="caret caretfix"></span></a>
			<ul class="dropdown-menu" role="menu">
				<li class="disabled"><a href="{% url 'preproc_upload' %}">Preprocessing</a></li>
				<li><a href="{% url 'class_upload' %}">Classification</a></li>
				<li><a href="#">Network</a></li>
			</ul>
		</li>
	{% endif %}
{% endblock %}


{# CONTENT #}

{% block main %}
	{% if form_error %}
        <p style="color: red; text-align: center; font-weight: bold">ERROR: please enter all the required files.</p><br />
    {% endif %}
    {% if ex_error %}
        <p style="color: red; text-align: center; font-weight: bold">ERROR: please enter the correct type of files.</p><br />
    {% endif %}
	<p style="text-align:center">Select or drop a <strong>ZIP</strong> and a <strong>MAP</strong> file for the upload.</p><br />
	<form id="dropform" class="form fileformbox dropzone" method="post" enctype="multipart/form-data"> 
		{% csrf_token %}
		<div class="input-group forminp">
			<span class="input-group-addon">
				<span class="glyphicon glyphicon-compressed" style="width:58px"> ZIP</span>
			</span>
			<input id="id_file" name="file_zip" type="file" class="form-control" />
		</div>
		<br />
		<div class="input-group forminp">
			<span class="input-group-addon">
				<span class="glyphicon glyphicon-file"> MAP</span>
			</span>
			<input id="id_file" name="file_map" type="file" class="form-control" />
		</div>
		<br />
		<input type="submit" class="btn btn-default centeredbutton start" value="Submit" />
	</form>
	<br /><br />
	<p style="text-align:center">Please wait for the files to finish uploading: do not leave the page, you will be redirected automatically.</p>
	<script src="{% static 'script/dropzone.js' %}"></script>
    <p>
        <h3>Select file</h3>
        {% for file in file_list %}
        <p>
            {{ file.0.filename }} |
            {{ file.1.filename }} |
            <a href="/preproc/celery/{{ file.2 }}/1/"> SELECT </a> |
            <a href="/preproc/delete/{{ file.2 }}/"> DELETE </a>
        </p>
        {% endfor %}
    </p>
{% endblock %}
